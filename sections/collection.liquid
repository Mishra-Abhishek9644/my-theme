{% comment %}
  Collection template – styled like Featured Products cards
{% endcomment %}

<section class="bg-white px-12 py-10">
  <!-- Collection Heading -->
  <div class="text-black flex flex-col justify-center items-center gap-3 mb-12">
    <h1 class="text-4xl font-semibold">
      {{ collection.title }}
    </h1>
  </div>

  <!-- Collection Toolbar -->
<div class="flex flex-wrap items-center justify-between gap-4 mb-8">

  <!-- Left: Filter + Count -->
  <div class="flex items-center gap-6 text-sm text-gray-700">
    <button
      type="button"
      onclick="document.getElementById('filters').classList.toggle('hidden')"
      class="flex items-center gap-2 hover:text-black"
    >
      ☰ Filter
    </button>

    <span>
      We found {{ collection.products_count }} products available for you.
    </span>
  </div>

  <!-- Right: Sort -->
  <form method="get">
    <select
      name="sort_by"
      onchange="this.form.submit()"
      class="border rounded-md px-4 py-2 text-sm"
    >
      {% for option in collection.sort_options %}
        <option
          value="{{ option.value }}"
          {% if option.value == collection.sort_by %}
            selected
          {% endif %}
        >
          {{ option.name }}
        </option>
      {% endfor %}
    </select>
  </form>

</div>

<!-- Filters Panel -->
<div id="filters" class="hidden mb-10 border rounded-md p-6">

  <form method="get" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

    {% for filter in collection.filters %}
      <div>
        <h3 class="font-medium mb-3">
          {{ filter.label }}
        </h3>

        {% case filter.type %}

          {% when 'list' %}
            <ul class="space-y-2">
              {% for value in filter.values %}
                <li>
                  <label class="flex items-center gap-2 text-sm">
                    <input
                      type="checkbox"
                      name="{{ value.param_name }}"
                      value="{{ value.value }}"
                      {% if value.active %}checked{% endif %}
                      {% if value.count == 0 and value.active == false %}disabled{% endif %}
                      onchange="this.form.submit()"
                    >
                    {{ value.label }} ({{ value.count }})
                  </label>
                </li>
              {% endfor %}
            </ul>

          {% when 'price_range' %}
            <div class="flex gap-2">
              <input
                type="number"
                name="{{ filter.min_value.param_name }}"
                placeholder="Min"
                value="{{ filter.min_value.value }}"
                class="w-full border px-3 py-2 rounded-md"
              >
              <input
                type="number"
                name="{{ filter.max_value.param_name }}"
                placeholder="Max"
                value="{{ filter.max_value.value }}"
                class="w-full border px-3 py-2 rounded-md"
              >
            </div>
            <button
              type="submit"
              class="mt-3 text-sm underline"
            >
              Apply
            </button>

        {% endcase %}
      </div>
    {% endfor %}

  </form>
</div>


  {% paginate collection.products by 12 %}
    <!-- Products Grid -->
    <div class="max-w-8xl mx-auto grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-8">
      {% for product in collection.products %}
        <a
          href="{{ product.url }}"
          class="group block flex flex-col justify-center gap-2 items-center h-[520px]"
        >
          <!-- Product Image -->
          <div class="h-[420px] w-full bg-gray-100 overflow-hidden rounded-md">
            {% if product.featured_image %}
              <img
                src="{{ product.featured_image | image_url: width: 800 }}"
                alt="{{ product.title | escape }}"
                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                height=""
                width=""
              >
            {% endif %}
          </div>

          <!-- Product Info -->
          <div class="mt-4 text-center">
            <h3 class="text-lg font-medium text-black">
              {{ product.title }}
            </h3>

            <p class="text-gray-700 mt-1">
              {{ product.price | money }}
            </p>
          </div>
        </a>
      {% endfor %}
    </div>

    <!-- Pagination -->
    <nav class="flex items-center justify-center m-2 gap-2 text-sm">
      {% if paginate.previous %}
        <a
          href="{{ paginate.previous.url }}"
          class="px-4 py-2 border rounded-md hover:bg-black hover:text-white transition"
        >
          ← Prev
        </a>
      {% endif %}

      {% for part in paginate.parts %}
        {% if part.is_link %}
          <a
            href="{{ part.url }}"
            class="px-4 py-3 border rounded-full hover:bg-black hover:text-white transition"
          >
            {{ part.title }}
          </a>
        {% else %}
          <span
            class="px-4 py-3 border rounded-full bg-black text-white"
          >
            {{ part.title }}
          </span>
        {% endif %}
      {% endfor %}

      {% if paginate.next %}
        <a
          href="{{ paginate.next.url }}"
          class="px-4 py-2 border rounded-md hover:bg-black hover:text-white transition"
        >
          Next →
        </a>
      {% endif %}
    </nav>
  {% endpaginate %}
</section>

{% schema %}
{
  "name": "Collection",
  "settings": []
}
{% endschema %}
