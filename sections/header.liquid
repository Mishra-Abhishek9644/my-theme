<!-- ✅ Top Promo Bar -->
<div class="flex justify-center bg-[#4d7560] text-white p-2">
  <p>Free Shipping on all orders ₹999+</p>
</div>

<!-- ✅ Header Main -->
<div
  class="
    header-main grid grid-cols-[auto_1fr_auto] md:grid-cols-[1fr_auto_1fr]
    items-center px-3 md:px-6 py-6 bg-white
  "
>
  <!-- ✅ Hamburger (Mobile Only) -->
  <button
    id="mobile-menu-open"
    class="block lg:hidden text-2xl mx-2  flex justify-start"
    aria-label="Open menu"
  >
    ☰
  </button>

  <!-- ✅ Desktop Navigation -->
  <nav class="hidden lg:flex gap-10 justify-self-start items-center">
    {% for link in linklists['main-menu'].links %}
      <a
        href="{{ link.url }}"
        class="
          relative inline-block whitespace-nowrap
          text-black font-medium text-lg

          after:content-['']
          after:absolute after:left-0 after:-bottom-1
          after:h-[1.5px] after:w-full
          after:bg-black

          after:scale-x-0 after:origin-left
          after:transition-transform after:duration-300

          hover:after:scale-x-100
          {% if link.active %} after:scale-x-100 {% endif %}
        "
      >
        {{ link.title }}
      </a>
    {% endfor %}
  </nav>

  <!-- ✅ Logo -->
  <div class="flex justify-start md:justify-center">
    {% if section.settings.logo != blank %}
      <a href=" {{ routes.root_url }}">
      <img
        src="{{ section.settings.logo | image_url: width: 500 }}"
        class="h-4 md:h-5 lg:h-7"
        alt="{{ shop.name }}"
        height=""
        width=""
      ></a>
    {% else %}
      <span class="text-xl font-bold">{{ shop.name }}</span>
    {% endif %}
  </div>

  <!-- ✅ Icons -->
  <div class="flex gap-4 justify-self-end">
    <!-- Search Button -->
    <button
      id="open-search"
      class="hidden lg:block relative"
      aria-label="Open search"
      type="button"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="m21 21-4.34-4.34"/>
        <circle cx="11" cy="11" r="8"/>
      </svg>
    </button>

    <!-- ✅ Search Popup -->
    <div
      id="search-popup"
      class="
        hidden absolute top-22 right-46 bg-white border shadow-lg
        rounded-md p-4 w-72 z-50
      "
    >
      <form action="{{ routes.search_url }}" method="get">
        <input
          type="text"
          name="q"
          placeholder="Search products..."
          class="w-full border px-4 py-2 rounded-md focus:outline-none"
        >

        <button
          type="submit"
          class="
            mt-3 w-full bg-black text-white py-2 rounded-md
            hover:bg-gray-800 transition
          "
        >
          Search
        </button>
      </form>
    </div>

    <!-- Account -->
    {% if customer %}
      <a href="{{ routes.account_url }}" aria-label="My Account">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="30"
          height="30"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="12" cy="8" r="5"/>
          <path d="M20 21a8 8 0 0 0-16 0"/>
        </svg>
      </a>
    {% else %}
      <a href="{{ routes.account_login_url }}" aria-label="Login">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="30"
          height="30"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="12" cy="8" r="5"/>
          <path d="M20 21a8 8 0 0 0-16 0"/>
        </svg>
      </a>
    {% endif %}

    <!-- Wishlist -->
    <a href="/pages/wishlist" aria-label="Wishlist" class="relative inline-flex">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path
          d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0
          A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313
          a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5"
        />
      </svg>

      <span
        id="wishlist-count"
        class="
          absolute -top-2 -right-2 bg-[#4d7560] text-white text-xs
          w-5 h-5 flex items-center justify-center rounded-full hidden
        "
      >
        0
      </span>
    </a>

    <!-- Cart -->
    <a href="/cart" aria-label="Cart" class="relative inline-flex">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M16 10a4 4 0 0 1-8 0"/>
        <path d="M3.103 6.034h17.794"/>
        <path
          d="M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14
          a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667
          A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z"
        />
      </svg>

      {% if cart.item_count > 0 %}
        <span
          class="
            absolute -top-2 -right-2 bg-[#4d7560] text-white text-xs
            w-5 h-5 flex items-center justify-center rounded-full
          "
        >
          {{ cart.item_count }}
        </span>
      {% endif %}
    </a>
  </div>
</div>

<!-- ✅ Mobile Menu Overlay -->
<div
  id="mobile-menu"
  class="fixed  inset-0 bg-black/40 hidden z-50 lg:hidden"
>
  <div class="bg-white w-4/5 max-w-sm h-full p-6 flex flex-col relative gap-2">
    <div class="flex justify-start gap-2 items-center my-2">
      <div
        id="search-popup"
        class="bg-white  shadow-lg rounded-md w-72"
      >
        <form action="{{ routes.search_url }}" method="get">
          <input
            type="text"
            name="q"
            placeholder="Search products..."
            class="w-full border px-4 py-2 rounded-md focus:outline-none"
          >

          <button
            type="submit"
            class="
              mt-3 w-full bg-black text-white py-2 rounded-md
              hover:bg-gray-800 transition
            "
          >
            Search
          </button>
        </form>
      </div>
      <!-- Close Button -->
      <button
        id="mobile-menu-close"
        class="absolute top-0 right-1 md:top-2 md:right-3 text-2xl mb-8 flex justify-end"
        aria-label="Close menu"
      >
        ✕
      </button>
    </div>

    <!-- Mobile Links -->
    <nav class="flex flex-col gap-6">
      {% for link in linklists['main-menu'].links %}
        <a
          href="{{ link.url }}"
          class="text-lg font-medium text-black hover:underline"
        >
          {{ link.title }}
        </a>
      {% endfor %}
    </nav>
  </div>
</div>

<!-- ✅ Header Scripts -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    /* ✅ Search Popup */
    const openSearch = document.getElementById('open-search');
    const popup = document.getElementById('search-popup');

    if (openSearch && popup) {
      openSearch.addEventListener('click', () => {
        popup.classList.toggle('hidden');
      });

      document.addEventListener('click', (e) => {
        if (!popup.contains(e.target) && !openSearch.contains(e.target)) {
          popup.classList.add('hidden');
        }
      });
    }

    /* ✅ Mobile Menu Toggle */
    const mobileMenu = document.getElementById('mobile-menu');
    const openBtn = document.getElementById('mobile-menu-open');
    const closeBtn = document.getElementById('mobile-menu-close');

    if (mobileMenu && openBtn && closeBtn) {
      openBtn.addEventListener('click', () => {
        mobileMenu.classList.remove('hidden');
      });

      closeBtn.addEventListener('click', () => {
        mobileMenu.classList.add('hidden');
      });

      mobileMenu.addEventListener('click', (e) => {
        if (e.target === mobileMenu) {
          mobileMenu.classList.add('hidden');
        }
      });
    }
  });
</script>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image"
    }
  ]
}
{% endschema %}
