<!-- Top Promo Bar -->
<div class="flex justify-center bg-[#4d7560] text-white p-2 ">
  <p>Free Shipping on all orders ₹999+</p>
</div>

<!-- Header Main -->
<div class="header-main grid grid-cols-[auto_1fr_auto] md:grid-cols-[1fr_auto_1fr] items-center px-6 py-6 bg-white">
  <!-- Hamburger (mobile only) -->
  <button
    id="mobile-menu-open"
    class="md:hidden text-2xl"
    aria-label="Open menu"
  >
    ☰
  </button>

  <!-- Desktop Navigation -->
  <nav class="hidden md:flex gap-10 justify-self-start">
    {% for link in linklists['main-menu'].links %}
      <a href="{{ link.url }}" class="text-black font-medium text-lg hover:underline">
        {{ link.title }}
      </a>
    {% endfor %}
  </nav>

  <!-- Logo (centered) -->
  <div class="flex justify-center">
    {% if section.settings.logo != blank %}
      <img
        src="{{ section.settings.logo | image_url: width: 500 }}"
        class="h-7 w-45"
        height=""
        width=""
        alt="{{ shop.name }}"
      >
    {% else %}
      <span class="text-xl font-bold">{{ shop.name }}</span>
    {% endif %}
  </div>

  <!-- Icons -->
  <div class="flex gap-4 justify-self-end">
    <!-- Search Icon Button -->
    <button
      id="open-search"
      class="relative"
      aria-label="Open search"
      type="button"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-search"
      >
        <path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/>
      </svg>
    </button>
    <!-- Search Popup -->
    <div
      id="search-popup"
      class="hidden absolute top-20 right-40 bg-white border shadow-lg rounded-md p-4 w-72 z-50"
    >
      <form action="{{ routes.search_url }}" method="get">
        <input
          type="text"
          name="q"
          placeholder="Search products..."
          class="w-full border px-4 py-2 rounded-md focus:outline-none"
        >

        <button
          type="submit"
          class="mt-3 w-full bg-black text-white py-2 rounded-md hover:bg-gray-800 transition"
        >
          Search
        </button>
      </form>
    </div>

    <a href="/account" aria-label="Account">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-user-round-icon lucide-user-round"
      >
        <circle cx="12" cy="8" r="5"/><path d="M20 21a8 8 0 0 0-16 0"/>
      </svg>
    </a>
    <!-- Wishlist Icon -->
    <a href="/pages/wishlist" aria-label="Wishlist" class="relative inline-flex">
      <!-- Heart Icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-heart-icon lucide-heart"
      >
        <path d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5"/>
      </svg>

      <!-- Wishlist Count Badge -->
      <span
        id="wishlist-count"
        class="
          absolute -top-2 -right-2 bg-[#4d7560] text-white text-xs
          w-5 h-5 flex items-center justify-center rounded-full
          hidden
        "
      >
        0
      </span>
    </a>

    <a href="/cart" aria-label="Cart" class="relative inline-flex">
      <!-- Cart Icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-shopping-bag"
      >
        <path d="M16 10a4 4 0 0 1-8 0"/>
        <path d="M3.103 6.034h17.794"/>
        <path d="M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z"/>
      </svg>

      <!-- Cart Count Badge -->
      {% if cart.item_count > 0 %}
        <span
          class="
            absolute -top-2 -right-2 bg-[#4d7560] text-white text-xs
            w-5 h-5 flex items-center justify-center rounded-full
          "
        >
          {{ cart.item_count }}
        </span>
      {% endif %}
    </a>
  </div>
</div>
<!-- Mobile Menu Overlay -->
<div
  id="mobile-menu"
  class="fixed inset-0 bg-black/40 hidden z-50"
>
  <!-- Drawer -->
  <div class="bg-white w-4/5 max-w-sm h-full p-6">
    <!-- Close button -->
    <button
      id="mobile-menu-close"
      class="text-2xl mb-6"
      aria-label="Close menu"
    >
      ✕
    </button>

    <!-- Mobile Navigation -->
    <nav class="flex flex-col gap-4 ">
      {% for link in linklists['main-menu'].links %}
        <a
          href="{{ link.url }}"
          class="text-lg font-medium text-black"
        >
          {{ link.title }}
        </a>
      {% endfor %}
    </nav>
  </div>
</div>
{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo image"
    }
  ]
}
{% endschema %}
<script>
document.addEventListener("DOMContentLoaded", () => {

  const openBtn = document.getElementById("open-search");
  const popup = document.getElementById("search-popup");

  if (!openBtn || !popup) return;

  // Open search box
  openBtn.addEventListener("click", () => {
    popup.classList.toggle("hidden");
  });

  // Close when clicking outside
  document.addEventListener("click", (e) => {
    if (!popup.contains(e.target) && !openBtn.contains(e.target)) {
      popup.classList.add("hidden");
    }
  });

});
</script>
